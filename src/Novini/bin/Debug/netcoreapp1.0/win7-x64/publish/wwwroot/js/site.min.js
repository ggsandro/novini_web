function openModal(){overlay.classList.remove("hidden-xs-up")}function closeModal(){overlay.classList.add("hidden-xs-up")}function openContacts(){contacts.classList.remove("hidden-xs-up")}function closeContacts(){contacts.classList.add("hidden-xs-up")}function showOkMessage(){okMessage.classList.add("show-message")}function hideOkMessage(){okMessage.classList.remove("show-message")}function showErrorMessage(){errorMessage.classList.add("show-message")}function hideErrorMessage(){errorMessage.classList.remove("show-message")}function showSpiner(){spiner.classList.remove("hidden-xs-up")}function hideSpiner(){spiner.classList.add("hidden-xs-up")}function whichTransitionEvent(){var n,i=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in t)if(i.style[n]!==undefined)return t[n]}function serializeForm(){for(var i=form.elements,r=[],f=i.length,u="",n=0;n<f;n+=1){var t=i[n],e=t.type,o=t.name,s=t.value;switch(e){case"text":case"radio":case"checkbox":case"textarea":case"select-one":u=o+"="+s;r.push(u)}}return r.join("&")}function newPost(){var n=new XMLHttpRequest;n.addEventListener("load",function(){closeModal();showOkMessage();var n=whichTransitionEvent();n&&okMessage.addEventListener(n,function(){setTimeout(hideOkMessage,1e3)})});n.addEventListener("error",function(){closeModal();showErrorMessage();var n=whichTransitionEvent();n&&errorMessage.addEventListener(n,function(){setTimeout(hideErrorMessage,1e3)})});n.open("POST","/home/addnewsitem",!0);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");n.send(serializeForm())}function RenderTemplate(n,t,i,r,u){return'<div class="col-xs-12 col-md-custom-4"><div class="card"><div class="card-header"><a href="'+n+'" class="news-title" target="_blank">'+t+'<\/a><\/div><div class="card-block"><label class="text-muted">'+i+'<\/label><label class="text-muted pull-xs-right">'+u+'<\/label><p class="card-text">'+r+"<\/p><\/div><\/div><\/div> "}function extractDomain(n){var t;return t=n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0],t.split(":")[0]}var overlay=document.getElementById("overlay"),contacts=document.getElementById("contacts"),contactsButton=document.getElementById("contactsbutton"),form=document.getElementById("addNewsItem"),okMessage=document.getElementById("okmessage"),errorMessage=document.getElementById("errormessage"),addNewsButton=document.getElementById("addNewsButton"),moreNewsButton=document.getElementById("moreNewsButton"),contentBody=document.getElementById("contentbody"),elementsOnPage=document.getElementById("elementsOnPage"),spiner=document.getElementById("spiner"),addNewsHeader=document.getElementById("add-news-header"),addNewsContent=document.getElementById("add-news-content"),addNewsUrl=document.getElementById("add-news-url");window.addEventListener("load",function(){form.addEventListener("submit",function(n){n.preventDefault();newPost()});addNewsButton.addEventListener("click",function(n){n.preventDefault();openModal()});contactsButton.addEventListener("click",function(n){n.preventDefault();openContacts()});moreNewsButton.addEventListener("click",function(){var n=new XMLHttpRequest;n.open("GET","/home/morenews?currentElements="+elementsOnPage.value,!0);n.onload=function(){var t,r,i,u;if(n.status>=200&&n.status<400){for(t=JSON.parse(n.responseText),r="",i=0;i<t.length;i++)u=RenderTemplate(t[i].Url,t[i].Title,extractDomain(t[i].Url),t[i].Content,t[i].TimeStampString),r+=u;contentBody.insertAdjacentHTML("beforeend",r);elementsOnPage.value+=t.length;hideSpiner()}else hideSpiner()};n.onerror=function(){alert("asdasd");hideSpiner()};n.send();showSpiner()})});