"use strict";function openModal(){overlay.classList.remove("hidden-xs-up")}function closeModal(){overlay.classList.add("hidden-xs-up")}function openContacts(){contacts.classList.remove("hidden-xs-up")}function closeContacts(){contacts.classList.add("hidden-xs-up")}function showOkMessage(){okMessage.classList.add("show-message")}function hideOkMessage(){okMessage.classList.remove("show-message")}function showErrorMessage(){errorMessage.classList.add("show-message")}function hideErrorMessage(){errorMessage.classList.remove("show-message")}function showSpiner(){spiner.classList.remove("hidden-xs-up")}function hideSpiner(){spiner.classList.add("hidden-xs-up")}function whichTransitionEvent(){var n,i=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in t)if(i.style[n]!==undefined)return t[n]}function serializeForm(){for(var i=form.elements,r=[],f=i.length,u="",n=0;n<f;n+=1){var t=i[n],e=t.type,o=t.name,s=t.value;switch(e){case"text":case"radio":case"checkbox":case"textarea":case"select-one":u=o+"="+s;r.push(u)}}return r.join("&")}function newPost(){var n=new XMLHttpRequest;n.addEventListener("load",function(){closeModal();showOkMessage();var n=whichTransitionEvent();n&&okMessage.addEventListener(n,function(){setTimeout(hideOkMessage,1e3)})});n.addEventListener("error",function(){closeModal();showErrorMessage();var n=whichTransitionEvent();n&&errorMessage.addEventListener(n,function(){setTimeout(hideErrorMessage,1e3)})});n.open("POST","/home/addnewsitem",!0);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");n.send(serializeForm())}function GetNews(n,t){var i=new XMLHttpRequest;i.open("GET","/home/morenews?currentElements="+elementsOnPage.value,!0);i.onload=function(){var u,f,r,e;if(i.status>=200&&i.status<400){for(u=JSON.parse(i.responseText),f="",r=0;r<u.length;r++)e=n?RenderTemplateAdmin(u[r].Url,u[r].Title,u[r].Content,u[r].IsApproved,t+r,u[r].Id):RenderTemplate(u[r].Url,u[r].Title,extractDomain(u[r].Url),u[r].Content,u[r].TimeStampString),f+=e;adminForm.insertAdjacentHTML("beforeend",f);elementsOnPage.value+=u.length;hideSpiner()}else hideSpiner()};i.onerror=function(){alert("asdasd");hideSpiner()};i.send();showSpiner()}function RenderTemplate(n,t,i,r,u){return'<div class="col-xs-12 col-md-custom-4"><div class="card"><div class="card-header"><a href="'+n+'" class="news-title" target="_blank">'+t+'<\/a><\/div><div class="card-block"><label class="text-muted">'+i+'<\/label><label class="text-muted pull-xs-right">'+u+'<\/label><p class="card-text">'+r+"<\/p><\/div><\/div><\/div> "}function RenderTemplateAdmin(n,t,i,r,u,f){var e=r?'checked="checked"':"";return'<div class="col-xs-12 col-md-custom-4"><div class="card"><div class="card-header"><input data-val="true" data-val-required="The Id field is required." id="z'+u+'__Id" name="['+u+'].Id" type="hidden" value="'+f+'"><div class="form-group"><h4>Заголовок<\/h4><input class="form-control" data-val="true" data-val-maxlength="The field Title must be a string or array type with a maximum length of 80." data-val-maxlength-max="80" data-val-required="The Title field is required." id="z'+u+'__Title" name="['+u+'].Title" type="text" value="'+t+'"><\/div><div class="form-group"><h4>Адреса посилання(URL)<\/h4><input class="form-control" data-val="true" data-val-maxlength="The field Url must be a string or array type with a maximum length of 200." data-val-maxlength-max="200" data-val-required="The Url field is required." id="z'+u+'__Url" name="['+u+'].Url" type="text" value="'+n+'"><\/div><\/div><div class="card-block"><div class="form-group"><h4>Текст<\/h4><input class="form-control" data-val="true" data-val-maxlength="The field Content must be a string or array type with a maximum length of 130." data-val-maxlength-max="130" data-val-required="The Content field is required." id="z'+u+'__Content" name="['+u+'].Content" type="text" value="'+i+'"><\/div><div class="form-group text-center"><h4>Показувати на головній<\/h4><input class="form-control" data-val="true" data-val-required="The IsApproved field is required." id="z'+u+'__IsApproved" name="['+u+'].IsApproved" '+e+' type="checkbox" value="true"><\/div><\/div><\/div><\/div>'}function extractDomain(n){var t;return t=n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0],t.split(":")[0]}var overlay=document.getElementById("overlay"),contacts=document.getElementById("contacts"),contactsButton=document.getElementById("contactsbutton"),form=document.getElementById("addNewsItem"),okMessage=document.getElementById("okmessage"),errorMessage=document.getElementById("errormessage"),addNewsButton=document.getElementById("addNewsButton"),moreNewsButton=document.getElementById("moreNewsButton"),moreNewsButtonAdmin=document.getElementById("moreNewsButtonAdmin"),contentBody=document.getElementById("contentbody"),adminForm=document.getElementById("admin-news-form"),elementsOnPage=document.getElementById("elementsOnPage"),spiner=document.getElementById("spiner"),addNewsHeader=document.getElementById("add-news-header"),addNewsContent=document.getElementById("add-news-content"),addNewsUrl=document.getElementById("add-news-url");window.addEventListener("load",function(){form.addEventListener("submit",function(n){n.preventDefault();newPost()});addNewsButton.addEventListener("click",function(n){n.preventDefault();openModal()});contactsButton.addEventListener("click",function(n){n.preventDefault();openContacts()});moreNewsButton&&moreNewsButton.addEventListener("click",function(){GetNews(!1,0)});moreNewsButtonAdmin&&moreNewsButtonAdmin.addEventListener("click",function(){var n=document.getElementsByClassName("card").length;GetNews(!0,n)})});